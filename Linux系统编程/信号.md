#                                                              信号

## 信号描述

![image-20250626192433524](C:\Users\a1956\AppData\Roaming\Typora\typora-user-images\image-20250626192433524.png)



## 信号相关的概念

![image-20250626205726672](C:\Users\a1956\AppData\Roaming\Typora\typora-user-images\image-20250626205726672.png)



## 信号4要素

![image-20250626211507486](C:\Users\a1956\AppData\Roaming\Typora\typora-user-images\image-20250626211507486.png)

## 信号的产生

![image-20250627121942337](C:/Users/a1956/AppData/Roaming/Typora/typora-user-images/image-20250627121942337.png)

           - ​      kill 命令



## kill函数、命令产出信号

![image-20250627124303518](C:/Users/a1956/AppData/Roaming/Typora/typora-user-images/image-20250627124303518.png)



![ ](C:/Users/a1956/AppData/Roaming/Typora/typora-user-images/image-20250627123011025.png)





## alarm函数产生信号

- ==一个进程只有唯一的一个闹钟==

![image-20250627130652886](C:/Users/a1956/AppData/Roaming/Typora/typora-user-images/image-20250627130652886.png)



- 用alarm统计计算机一秒能数多少数

![image-20250627131342254](C:/Users/a1956/AppData/Roaming/Typora/typora-user-images/image-20250627131342254.png)



- 使用time命令查看程序执行消耗的时间
- 实际时间=用户时间+内核时间+等待时间
- time./alarm>out  ------程序优化的瓶颈在IO



## setitimer 函数（定期器）*

![image-20250627134947582](C:/Users/a1956/AppData/Roaming/Typora/typora-user-images/image-20250627134947582.png)

例如：

![image-20250627135341041](C:/Users/a1956/AppData/Roaming/Typora/typora-user-images/image-20250627135341041.png)



![image-20250627140247421](信号.assets/image-20250627140247421.png)



## ==信号集操作函数==

![image-20250627150906854](信号.assets/image-20250627150906854.png)

信号操作集函数

**操作自定义信号集函数**

![image-20250627145724174](信号.assets/image-20250627145724174.png)



## 操作信号屏蔽字mask的信号集操作

![image-20250627151027933](信号.assets/image-20250627151027933.png)

![image-20250627151139252](信号.assets/image-20250627151139252.png)

- 实例查看未决信号集：

![image-20250627175037174](信号.assets/image-20250627175037174.png)

![image-20250627175133855](信号.assets/image-20250627175133855.png)

![image-20250627175225417](信号.assets/image-20250627175225417.png)

==**9和19号信号不能屏蔽，忽略，捕捉**==



## 信号捕捉

**signal函数***：

![image-20250627180911904](信号.assets/image-20250627180911904.png)

示例：

![image-20250627181306519](信号.assets/image-20250627181306519.png)



==**sigaction函数**==

- 注册某一个信号的捕捉事件，指定回调函数

![image-20250627183213119](信号.assets/image-20250627183213119.png)

==**sigaction函数实现信号捕捉：**==

![image-20250627184233629](信号.assets/image-20250627184233629.png)

![image-20250627184248074](信号.assets/image-20250627184248074.png)





**信号捕捉特性：**

![image-20250627184909866](信号.assets/image-20250627184909866.png)



![image-20250627184616334](信号.assets/image-20250627184616334.png)

![image-20250627184653296](信号.assets/image-20250627184653296.png)



## 借助信号捕捉，完成子进程回收

**SIGCHLD信号产生条件：**

![image-20250627185353553](信号.assets/image-20250627185353553.png)

==**回收子进程代码：**==

![image-20250627191137916](信号.assets/image-20250627191137916.png)

![image-20250627191302314](信号.assets/image-20250627191302314.png)

![image-20250627191322373](信号.assets/image-20250627191322373.png)



## 内核实现信号捕捉过程

![image-20250627191418085](信号.assets/image-20250627191418085.png)
