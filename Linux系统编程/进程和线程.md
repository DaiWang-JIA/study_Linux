# 进程和线程

## 进程组和会话

- 进程聚集称为进程组，多个进程组聚集称为会话

![image-20250628191727457](进程和线程.assets/image-20250628191727457.png)

- ps ajx 查看进程组id和会话id

- 创建会话

![image-20250628192705360](进程和线程.assets/image-20250628192705360.png)

- getsid函数

![image-20250628193102656](进程和线程.assets/image-20250628193102656.png)

- ==setsid==

![image-20250628193139024](进程和线程.assets/image-20250628193139024.png)

![image-20250628193314803](进程和线程.assets/image-20250628193314803.png)

![image-20250628193428064](进程和线程.assets/image-20250628193428064.png)





## 守护进程

### 守护进程概念

![image-20250628194846327](进程和线程.assets/image-20250628194846327.png)

### 创建守护进程

![image-20250628195058177](进程和线程.assets/image-20250628195058177.png)

- 代码：

![image-20250628200616274](进程和线程.assets/image-20250628200616274.png)

![image-20250628200551766](进程和线程.assets/image-20250628200551766.png)



# 线程

## 线程的概念

![image-20250630095940336](进程和线程.assets/image-20250630095940336.png)

![image-20250630100155953](进程和线程.assets/image-20250630100155953.png)

![image-20250630100943396](进程和线程.assets/image-20250630100943396.png)

## 线程内核实现原理

* 三级映射

![image-20250701151741662](进程和线程.assets/image-20250701151741662.png)



## 线程共享

![image-20250701161751911](进程和线程.assets/image-20250701161751911.png)



## 线程优缺点

![image-20250701161706155](进程和线程.assets/image-20250701161706155.png)

![image-20250701161947648](进程和线程.assets/image-20250701161947648.png)



## 线程控制原语

### 获取线程ID

![image-20250701165012169](进程和线程.assets/image-20250701165012169.png)

### 创建线程

![image-20250701165337541](进程和线程.assets/image-20250701165337541.png)

![image-20250701165537346](进程和线程.assets/image-20250701165537346.png)

## 创建子线程

![image-20250701170358216](进程和线程.assets/image-20250701170358216.png)



## 循环创建子线程

![image-20250701171604514](进程和线程.assets/image-20250701171604514.png)



## 线程退出

![image-20250701180207587](进程和线程.assets/image-20250701180207587.png)

![image-20250701175807465](进程和线程.assets/image-20250701175807465.png)

![image-20250701175850418](进程和线程.assets/image-20250701175850418.png)



## pthread_join回收线程退出值

![image-20250701180506419](进程和线程.assets/image-20250701180506419.png)

- 示例一：

![image-20250701182452244](进程和线程.assets/image-20250701182452244.png)

![image-20250701182524309](进程和线程.assets/image-20250701182524309.png)

- 示例二：

![image-20250701183224001](进程和线程.assets/image-20250701183224001.png)

![image-20250701183204663](进程和线程.assets/image-20250701183204663.png)



## pthread_detach线程分离

![image-20250701185353406](进程和线程.assets/image-20250701185353406.png)



## 杀死（取消）线程

![image-20250701190307427](进程和线程.assets/image-20250701190307427.png)

![image-20250701190910056](进程和线程.assets/image-20250701190910056.png)



## 终止线程的方法

![image-20250701191102597](进程和线程.assets/image-20250701191102597.png)

![image-20250701191007247](进程和线程.assets/image-20250701191007247.png)



## 线程进程终止原语对比

![image-20250701191250743](进程和线程.assets/image-20250701191250743.png)









